<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tablet Reminder Config</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --blue:#2563eb;
  --bg:#f8fafc;
  --border:#e5e7eb;
  --text:#111827;
}
*{box-sizing:border-box;font-family:Arial}
body{margin:0;background:var(--bg);color:var(--text)}

.hidden{display:none !important}

/* LOGIN */
.login{
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.login-box{
  background:white;
  width:320px;
  padding:28px;
  border-radius:16px;
  border:1px solid var(--border);
}
.login-box h2{text-align:center}

/* DASHBOARD */
.app{
  display:none;               /* IMPORTANT */
  height:100vh;
}
.sidebar{
  width:220px;
  background:white;
  border-right:1px solid var(--border);
  padding:20px;
}
.sidebar button{
  width:100%;
  margin-bottom:12px;
}
.content{
  flex:1;
  padding:20px;
}

/* BUTTONS / INPUTS */
input,select,button{
  width:100%;
  padding:10px;
  margin-top:10px;
  border-radius:8px;
  border:1px solid var(--border);
}
button{
  background:var(--blue);
  color:white;
  cursor:pointer;
}

/* CARDS */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
  gap:16px;
}
.card{
  background:white;
  padding:16px;
  border-radius:14px;
  border:1px solid var(--border);
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  display:none;
  align-items:center;
  justify-content:center;
}
.modal.active{display:flex}
.modal-box{
  background:white;
  width:520px;
  padding:24px;
  border-radius:20px;
}
.step{display:none}
.step.active{display:block}
.footer{
  display:flex;
  justify-content:space-between;
  margin-top:20px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="login" id="loginView">
  <div class="login-box">
    <h2>Login</h2>
    <input id="uid" placeholder="Username">
    <input id="pwd" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
    <div id="err" style="color:red;font-size:12px"></div>
  </div>
</div>

<!-- DASHBOARD -->
<div class="app" id="appView">
  <div class="sidebar">
    <button onclick="openWizard()">Add Medicine</button>
    <button onclick="renderCards()">Last Configured</button>
    <button onclick="saveExit()">Save & Exit</button>
  </div>

  <div class="content">
    <div id="tabletArea" class="cards">
      <div class="card">No tablets configured</div>
    </div>
  </div>
</div>

<!-- MEDICINE WIZARD -->
<div id="modal" class="modal">
<div class="modal-box">

<div class="step active">
  <h3>Tablet Details</h3>
  <input id="name" placeholder="Tablet Name">
  <input id="dose" type="number" placeholder="Dose Count">
</div>

<div class="step">
  <h3>Schedule</h3>
  <select id="repeatMode">
    <option value="daily">Daily</option>
    <option value="weekdays">Specific Weekdays</option>
  </select>
  <input id="time" type="time">
</div>

<div class="footer">
  <button onclick="prev()">Back</button>
  <button onclick="next()">Next</button>
</div>

</div>
</div>

<script>
/* DEBUG */
function log(msg){
  console.log("[DEBUG]", msg);
}

/* TEMP AUTH */
const AUTH = { user:"admin", pass:"admin123" };

/* LOGIN */
function login(){
  log("Login clicked");
  log("User entered: " + uid.value);

  if(uid.value === AUTH.user && pwd.value === AUTH.pass){
    log("Login success");

    // FORCE UI SWITCH
    loginView.style.display = "none";
    appView.style.display = "flex";

    log("loginView display = " + getComputedStyle(loginView).display);
    log("appView display = " + getComputedStyle(appView).display);

  }else{
    log("Login failed");
    err.innerText = "Invalid credentials";
  }
}

/* WIZARD LOGIC */
let step = 0;
const steps = document.querySelectorAll(".step");

function openWizard(){
  log("Open wizard");
  modal.classList.add("active");
}
function closeWizard(){
  modal.classList.remove("active");
  step = 0;
  updateSteps();
}
function updateSteps(){
  steps.forEach((s,i)=>s.classList.toggle("active",i===step));
}
function next(){
  log("Next clicked");
  if(step < steps.length-1){
    step++;
    updateSteps();
  }else{
    save();
  }
}
function prev(){
  if(step>0){
    step--;
    updateSteps();
  }
}

/* SAVE MEDICINE */
function save(){
  log("Saving medicine");

  tabletArea.innerHTML += `
    <div class="card">
      <b>${name.value}</b><br>
      Dose: ${dose.value}<br>
      ${repeatMode.value} @ ${time.value}
    </div>
  `;
  closeWizard();
}

/* DASHBOARD */
function renderCards(){
  log("Render cards");
}
function saveExit(){
  log("Save & Exit");
  location.reload();
}
</script>

</body>
</html>
